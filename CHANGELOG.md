# Changelog

All notable changes to this project will be documented in this file. See [standard-version](https://github.com/conventional-changelog/standard-version) for commit guidelines.

## 1.6.0 (2019-11-07)


### Features

* a whitelist of hard-drives to be monitored for storage ([14592a2](https://github.com/Julusian/media-scanner/commit/14592a2b8400df891353076a154f0c4a0271a4f1))
* add advanced metadata endpoint ([e7a4c88](https://github.com/Julusian/media-scanner/commit/e7a4c88f4860213819958670a29f2e54db22fb21))
* add api endpoint for sequence number from pouchdb ([cf30f2e](https://github.com/Julusian/media-scanner/commit/cf30f2e0c1c42bfe171ca4f11321084992a8fd39))
* Add optional scene detection to enhanced metadata ([5f95fec](https://github.com/Julusian/media-scanner/commit/5f95fecdaf672d537433f3d6481b0d574a626af2))
* Add processing list ([c1c5469](https://github.com/Julusian/media-scanner/commit/c1c54698777d9946b68ab1f645571659a12c4247))
* add processLimiter and Jest ([92256a7](https://github.com/Julusian/media-scanner/commit/92256a77780de96cdd09bbeac23346b14443721d))
* build with nexe instead of pkg ([353537a](https://github.com/Julusian/media-scanner/commit/353537a50206cc623f3e0e7076d8ce632f3d65dd))
* disk space info ([6ee4fdd](https://github.com/Julusian/media-scanner/commit/6ee4fdd1bee111854271dee922fadc255846d446))
* display version on boot ([f284c4f](https://github.com/Julusian/media-scanner/commit/f284c4f27fa7e62e540fc42c8e9e41a4e1f6f91e))
* Enhanced metadata. A subset of the data returned by ffprobe stored in json form and served over http with no AMCP wrappings ([6798be2](https://github.com/Julusian/media-scanner/commit/6798be27f04aa9edb59b44f6c2d8c7345a69496e))
* fix an issue with filenames with space chars when doing getMetadata ([ba3f4b1](https://github.com/Julusian/media-scanner/commit/ba3f4b189961775cb001d1a07e11a14a0820e336))
* implement manual mode in media scanner ([723b1c0](https://github.com/Julusian/media-scanner/commit/723b1c0573698b7ac1b15dd4f01e8fbb12cd2a25))
* kill child processes on watchdog kill ([e059fb7](https://github.com/Julusian/media-scanner/commit/e059fb7a9aada37c8e81894543a98280d29dcb48))
* log config on start ([1a80ee6](https://github.com/Julusian/media-scanner/commit/1a80ee627ed1a9551d0be029d9edf7236067f356))
* log message on startup ([0d22781](https://github.com/Julusian/media-scanner/commit/0d227818a447c819371c5597699ad2ed9fa68593))
* make new endpoints ([3bfbee4](https://github.com/Julusian/media-scanner/commit/3bfbee4763635dc551b5ff3c1871e4623a5a962d))
* many minor changes ([84b5fd9](https://github.com/Julusian/media-scanner/commit/84b5fd9e6c7afdf9e12ffb56335418ff1df71e0b))
* nexe ([10c181a](https://github.com/Julusian/media-scanner/commit/10c181a4434cca5e5d7d239694b7e8ba1007dc3d))
* override freeze frames when black frames are detected ([c30487f](https://github.com/Julusian/media-scanner/commit/c30487fbeb309b0765b281679023b0eeec3e29ae))
* report full command line if process in process limiter fails ([e455766](https://github.com/Julusian/media-scanner/commit/e455766bf3c5e86a7204fe8e29ec6483f2ab139a))
* retry logic in scanner ([b1974c0](https://github.com/Julusian/media-scanner/commit/b1974c0cfedcc954ba57bd5f3f11cb6b47758661))
* scanId preventing watchdog from locking up. ([0f449fc](https://github.com/Julusian/media-scanner/commit/0f449fce0c9df9a570ed5a399d65fb411a5f94c7))
* store manualMode state ([0dc71a0](https://github.com/Julusian/media-scanner/commit/0dc71a0d31d89525143a2034b98176a0e9dbbac8))
* update version and set node version back to 8 ([3977d65](https://github.com/Julusian/media-scanner/commit/3977d65ecd5021ee5865e34f7a771eb28f1479d6))
* use spawn on long ffmpeg commands ([f375388](https://github.com/Julusian/media-scanner/commit/f375388b2a0ae67a67bd577e66c8da7c9d1a67c6))
* **circlci:** add config ([70c91a6](https://github.com/Julusian/media-scanner/commit/70c91a6e935b48b83b13c12065c34d9fcd60ab72))
* **circleci:** added command to build windows exe on linux ([ad1e11a](https://github.com/Julusian/media-scanner/commit/ad1e11afde9f0576c498b6d0a86979b1a4839166))
* **scanner:** add options for black and freeze detect ([f2c39cf](https://github.com/Julusian/media-scanner/commit/f2c39cfabb8bf7fee4b5c2bf58fee271b9872a1d))
* **watchdog:** be more forgiving when expecting results ([5aa4c1f](https://github.com/Julusian/media-scanner/commit/5aa4c1f83b44927d771a266f103050e1db665e59))
* **watchdog:** clean up old watchdog-created files ([5da3e72](https://github.com/Julusian/media-scanner/commit/5da3e727330b8e5a56cdf7d0ea38e12cfd23b3fa))
* **watchdog:** retry removing of files if failed ([1a7f30f](https://github.com/Julusian/media-scanner/commit/1a7f30fba1dea42f0c9f261370f941b00813521b))
* watchdog implementation ([01a4c6b](https://github.com/Julusian/media-scanner/commit/01a4c6b755ac2e0770642c867250b6fd3e7f22ff))


### Bug Fixes

* [#5](https://github.com/Julusian/media-scanner/issues/5) Check for deleted files on startup ([#19](https://github.com/Julusian/media-scanner/issues/19)) ([1e3d27b](https://github.com/Julusian/media-scanner/commit/1e3d27bd287675904b49a137a1e78bbe29ea3cea))
* Add cors header to responses. ([3c91905](https://github.com/Julusian/media-scanner/commit/3c91905fceec0897a7ee2c796ee395136342ac81))
* automatically delete previews when files are removed from disk ([fcbb480](https://github.com/Julusian/media-scanner/commit/fcbb480c6f2a3965bc82b8d5b827696f8306089c))
* better process shutdown routine ([a5522fa](https://github.com/Julusian/media-scanner/commit/a5522fa76a8e19a52946df210ca511e617743878))
* building to executable ([aa62b46](https://github.com/Julusian/media-scanner/commit/aa62b462d9e8bfdf4ed9814bad75efe65834a100))
* building to executable ([#24](https://github.com/Julusian/media-scanner/issues/24)) ([298cb18](https://github.com/Julusian/media-scanner/commit/298cb183415ce0c22c35ecb5322dda83b1591683))
* catch db errors for thumbnail generate & preview generate ([15b06c3](https://github.com/Julusian/media-scanner/commit/15b06c3285fdf207fbeccc823b1fc3aca9dcef6f))
* check if mediainfo & thumbSize is present on the MediaObject if running in auto mode ([72e2b10](https://github.com/Julusian/media-scanner/commit/72e2b10a26c35948abe2daf93b3778d477e9ca00))
* CINF 201 ([c88f634](https://github.com/Julusian/media-scanner/commit/c88f634495f3e27ada2fab4a674332c4c60b0618))
* content-type ([9fc4970](https://github.com/Julusian/media-scanner/commit/9fc4970a9498bff55b1c94a6bc7dc26e7f13621e))
* crashed when having older data in db ([989d574](https://github.com/Julusian/media-scanner/commit/989d5743069dde1db0d47438278012a237e57c24))
* default colorize false but true in debug ([7bbd7b0](https://github.com/Julusian/media-scanner/commit/7bbd7b0312bd8f3de4917bad3ce399694b73a6fc))
* default timebase ([bfedae4](https://github.com/Julusian/media-scanner/commit/bfedae42c0d8cf0452d8a21fa5f6d3e83cc82c84))
* delete ([1e19b2f](https://github.com/Julusian/media-scanner/commit/1e19b2f744ab93dd4116d14382ef4f8da89ab972))
* do not rescan unnecessarily on restart ([90129bc](https://github.com/Julusian/media-scanner/commit/90129bc28d2512040ab8748b13207c700b35b248))
* don't read casparcg.config in default config ([e06b810](https://github.com/Julusian/media-scanner/commit/e06b8101b1e0dfe00ff931482c89e1fad65f2ffe))
* don't run watchdog on startup (to allow for the initial work to be done) ([880082a](https://github.com/Julusian/media-scanner/commit/880082aa621f18a0b69caab7db24f53bc0a74542))
* error in stat/fs on linux ([24fc180](https://github.com/Julusian/media-scanner/commit/24fc180e242897d0a6b7cb7e5a7da7e2bf110581))
* error messages ([c093797](https://github.com/Julusian/media-scanner/commit/c09379723ccd59f18318b5f12bf10b01ba518d24))
* fix an issue with generateInfo in automode ([e32161a](https://github.com/Julusian/media-scanner/commit/e32161ab7f95b334cfff5c3662e1371609905be9))
* forward error status ([2386590](https://github.com/Julusian/media-scanner/commit/23865903c849099870b89476cd19e0657d01a52d))
* generateAdvancedMetadata didn't get the data it needed from generateBasicMetadata ([08d4277](https://github.com/Julusian/media-scanner/commit/08d42775dcb8eedc81b09f55d71bec37620d088a))
* ignore media and dist files ([32c330d](https://github.com/Julusian/media-scanner/commit/32c330df3953e896419ccad7155820ba3b41aaee))
* improve db operations to avoid document conflicts ([2f752eb](https://github.com/Julusian/media-scanner/commit/2f752eb8e2c2701dfbe777186b42abe847e80499))
* info strings ([effd9e2](https://github.com/Julusian/media-scanner/commit/effd9e2bf4d5021e6e9f398a770adac519f071a9))
* initial probe and full metadata generation two-step ([cc89fb2](https://github.com/Julusian/media-scanner/commit/cc89fb23914f1a5cfd42669b5dc039d00919752c))
* it's audio if no pix_fmt ([d3a9941](https://github.com/Julusian/media-scanner/commit/d3a99411c0bf5912f179543c4158ee90721a998a))
* lanuch config ([184d1e0](https://github.com/Julusian/media-scanner/commit/184d1e028b43a720ab9293dd444ca4383eb4627a))
* linter complaints ([7c956c6](https://github.com/Julusian/media-scanner/commit/7c956c68856058681e9665df6c045bac4ec71205))
* make tb more friendly for client (which assumes framerate instead of timebase ([6b1b7db](https://github.com/Julusian/media-scanner/commit/6b1b7dbc46fc8d23cdd795350f2ae2c571745e4a))
* metadata ffmpeg filter order ([82f7597](https://github.com/Julusian/media-scanner/commit/82f7597ba460984894d9b69c54cfbfbf4a57ec22))
* more error logging ([06bdbd8](https://github.com/Julusian/media-scanner/commit/06bdbd8ac58095b92112dc8653cc711f72df3974))
* multiple lint errors ([ea6c2d1](https://github.com/Julusian/media-scanner/commit/ea6c2d10dc1cd6e0fbc98fa2fa8b5b839154a300))
* removed yarn ([5889833](https://github.com/Julusian/media-scanner/commit/588983315abe6285705a789640c8f5571c7c5b2c))
* Running on linux ([77e8646](https://github.com/Julusian/media-scanner/commit/77e864637d113147f1a60d3477ebcfab57d948b6))
* Set content-type on http responses to text/plain ([0281013](https://github.com/Julusian/media-scanner/commit/02810136cd2f10293ed4a6509dba14ccd1ec4d0b))
* unnecessary rescans on startup ([#27](https://github.com/Julusian/media-scanner/issues/27)) ([1f4db14](https://github.com/Julusian/media-scanner/commit/1f4db14ba7089359552af240045d37669fd0a833))
* **config:** default caspar config path ([b3decc2](https://github.com/Julusian/media-scanner/commit/b3decc29f3ca30f6b6965a98ae201695d5d8106d))
* **config:** default paths ([6eaa749](https://github.com/Julusian/media-scanner/commit/6eaa749eb5a1f49c0b399f0c4b81ca229c874d53))
* **config:** read caspar.config from working dir ([b07e05c](https://github.com/Julusian/media-scanner/commit/b07e05c1a923a412a1a46442175d4454e7f7c4be))
* **config:** win32 path ([a7903e3](https://github.com/Julusian/media-scanner/commit/a7903e3d86d61a7e4048c9b68a49597302892f86))
* **Dockerfile:** add ffmpeg ([1678392](https://github.com/Julusian/media-scanner/commit/16783928985dd3559bda6a14ab9c300b0787e2a8))
* **Dockerfile:** install ffmpeg (libav) ([52f5b8f](https://github.com/Julusian/media-scanner/commit/52f5b8fa972b7e601d3627c425be143b6eafb6bd))
* **perf:** reduce polling ([c4109b9](https://github.com/Julusian/media-scanner/commit/c4109b94f7f80303b251b00958965d13e4652520))
* **perf:** trottle the preview generation + speedup encoding ([79c6891](https://github.com/Julusian/media-scanner/commit/79c689194589ed90ee374448d3a40163ac534cb3))
* nconf is back ([b32bad2](https://github.com/Julusian/media-scanner/commit/b32bad2aef5c66524c3e3a3e0b381d91ebe3214d))
* pleasing linter ([29dd887](https://github.com/Julusian/media-scanner/commit/29dd887476b51cd90bd6b6de7f891f6c059f473b))
* re-order callbacks to catch initial file ejection ([702535c](https://github.com/Julusian/media-scanner/commit/702535c4911d1e7542eec8aa6a2e5e4b3219aaed))
* refactor watchdog logic ([3b9b013](https://github.com/Julusian/media-scanner/commit/3b9b0139fbe91158ae2b245622e731bef82f3b04))
* resolve issues with media scanner ([f4a9734](https://github.com/Julusian/media-scanner/commit/f4a9734200b10f908f0d41e21e769538b3035e83))
* robustness ([970ad19](https://github.com/Julusian/media-scanner/commit/970ad19893dfd27793e59e94b5de121c207bb09f))
* solve a problem with first scan of files over manual mode API ([7212f91](https://github.com/Julusian/media-scanner/commit/7212f91afc56c8dcc207b5ccb1bc4b80e22fe8ab))
* thumbnail base64 encoding ([927b830](https://github.com/Julusian/media-scanner/commit/927b830e60928101610fe671528d3e88b9302c39))
* translate time to human readable + colors ([f103f3c](https://github.com/Julusian/media-scanner/commit/f103f3ccd037b83826811ad84329ffdc550d3d6c))
* type cast metadata ([2c70d76](https://github.com/Julusian/media-scanner/commit/2c70d76d722623a828bbc3c51c9109c627b2e949))
* type classifier ([5c73450](https://github.com/Julusian/media-scanner/commit/5c734503695b1922b79c2658a91d436baad076da))
* update dependencies ([5df427d](https://github.com/Julusian/media-scanner/commit/5df427da16818d42158c9aa853390b9e1af24565))
* update version ([1479a9a](https://github.com/Julusian/media-scanner/commit/1479a9a5defe4251ead5834ffdaca13d8c13c6a9))
* update version and deps ([c76a876](https://github.com/Julusian/media-scanner/commit/c76a87602fa496a43bfedc292674fa0895c6d5c6))
* update version to 1.4.3 ([2e7fa69](https://github.com/Julusian/media-scanner/commit/2e7fa6987ba540d979a4b9c53649c99233ef364c))
* use prettyPrint logs in production ([f3bd57e](https://github.com/Julusian/media-scanner/commit/f3bd57edd8793b71d265a178d1f4f86c24415265))
* use processLimiter in preview and better logging ([6cc0534](https://github.com/Julusian/media-scanner/commit/6cc05343b8bdfffca57c04ea85d0a93f947f4c72))
* workaround for kill process win32 ([0f94a90](https://github.com/Julusian/media-scanner/commit/0f94a908f4b0117305788201ed2636ef260b1bf1))
* write back scans to db in manual mode ([e8af2d0](https://github.com/Julusian/media-scanner/commit/e8af2d0d9393cabde2a6731ff5294dffb830a2c0))
* wrong artifacs path ([2c2fc4e](https://github.com/Julusian/media-scanner/commit/2c2fc4e21d449b338d01dda542f400b2e3f711c5))
* **tls:** only include certain file extensions ([3be91ff](https://github.com/Julusian/media-scanner/commit/3be91ffb89983846dea9c5873f2ae1bc3c5cb184))
